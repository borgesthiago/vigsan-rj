{% extends 'base.html.twig' %}

{% block title %}Painel{% endblock %}

{% block body %}
<div class="row">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Cidadãos</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ cidadaos }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-user-injured fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-danger shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Unidades</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ unidades }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-hospital-user fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-danger shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Casos com Resultado</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ exames }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-vials fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-danger shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Casos de Sars-Cov-2</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ detectavel }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-viruses fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-danger shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-danger text-uppercase mb-1">Internados UTI</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ uti }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-user-injured fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-secondary shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">Inseridos SIVEP</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ sivep }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-building fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-primary shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Altas</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ altas }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-laugh-beam fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-secondary shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">Óbitos</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ obitos }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-frown fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-secondary shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">Transferidos</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ transferidos }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-retweet fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
    <div class="col-xl-3 col-md-6 mb-4">
        <div class="card border-left-secondary shadow h-100 py-2">
            <div class="card-body">
            <div class="row no-gutters align-items-center">
                <div class="col mr-2">
                <div class="text-xs font-weight-bold text-secondary text-uppercase mb-1">Ventilação</div>
                <div class="h5 mb-0 font-weight-bold text-gray-800">{{ ventilacao }}</div>
                </div>
                <div class="col-auto">
                    <i class="fas fa-fan fa-2x text-gray-300"></i>
                </div>
            </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12 mb-4">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Pacientes Por Unidades</h6>
            </div>
            <div class="card-body">
                {% for unidade in totalPacientesUnidades %}            
                    <h4 class="small font-weight-bold">{{ unidade.nome }}
                        {% set porcentagem = (unidade.total_pacientes / cidadaos) %}
                        {% if porcentagem <= 0.25 %}
                            {% set texto = 'primary' %}
                        {% elseif porcentagem > 0.26 and porcentagem <= 0.5 %}
                            {% set texto = 'info' %}
                        {% elseif porcentagem > 0.5 %}
                            {% set texto = 'success' %}
                        {% endif %}
                        <span class="float-right">{{ porcentagem|format_percent_number }}</span></h4>
                    <div class="progress mb-4">
                        <div class="progress-bar bg-{{ texto }}" role="progressbar" style="width: {{ porcentagem|format_percent_number }}" aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                    {{ unidade.total_pacientes }} </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{# <div class="row">
    <div class="col-lg-12 mb-4">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Gráfico Casos por dia</h6>
            </div>
            <div class="card-body">
               <canvas id="myChart" width="400" height="300"></canvas>               
            </div>
        </div>
    </div>
</div> #}
{# <script>
var test;
 $(document).ready(function($){
    var test = {{ totalNotificacaoUnidade|json_encode|raw }};
  test.forEach(myFunction);
  });
var texto = [];
function myFunction(item, index) {  
  var texto = item['unidade'];
  a = texto  + ",";
  b = "[" + a + "]"
 console.log(b);
}
 
  var ctx = document.getElementById("myChart");
  var myChart = new Chart(ctx, {
      type: 'line',
      data: {
          labels: [texto],
          datasets: [{
              label: '# qtd ',
              data: [''],
              backgroundColor: [
                  'rgba(255, 99, 132, 0.2)',
                  'rgba(54, 162, 235, 0.2)',
                  'rgba(255, 206, 86, 0.2)'
              ],
              borderColor: [
                  'rgba(255,99,132,1)',
                  'rgba(54, 162, 235, 1)',
                  'rgba(255, 206, 86, 1)'
              ],
              borderWidth: 1
          }]
      },
      options: {
          scales: {
              yAxes: [{
                  ticks: {
                      beginAtZero:true
                  }
              }]
          }
      }
  });
  </script> #}
{% endblock %}
{% block javascripts %}
<script>
$(document).ready(function() {
  $('#dataTable').DataTable({
      "language": {
          "url": "../../datatables/portuguese-brasil.json"
      }
  });
});
</script>
{% endblock %}
